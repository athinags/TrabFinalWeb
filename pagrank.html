<!DOCTYPE html>
<html lang="PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tutubas Games - Ranking</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background-color: #0a3042;
            color: #fff;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        header {
            background-color: #022f40;
            padding: 20px;
            text-align: center;
        }

        header h1 {
            margin: 0;
            font-size: 3em;
            color: #00bcd4;
        }

        footer {
            background-color: #022f40;
            text-align: center;
            padding: 10px 0;
            margin-top: auto;
        }

        .ranking-header {
            text-align: center;
            margin-bottom: 30px;
            color: #00bcd4;
        }

        .ranking-table {
            background-color: #033649;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .table {
            margin-bottom: 0;
            color: #fff;
        }

        .table thead {
            background-color: #022f40;
            color: #00bcd4;
        }

        .table tbody tr:nth-child(odd) {
            background-color: #044a63;
        }

        .table tbody tr:nth-child(even) {
            background-color: #033649;
        }

        .table tbody tr:hover {
            background-color: #05668d;
        }

        .rank-1 {
            background-color: #ffd700 !important;
            color: #000;
            font-weight: bold;
        }

        .rank-2 {
            background-color: #c0c0c0 !important;
            color: #000;
            font-weight: bold;
        }

        .rank-3 {
            background-color: #cd7f32 !important;
            color: #000;
            font-weight: bold;
        }

        .medal {
            width: 25px;
            height: 25px;
            margin-right: 10px;
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
            object-fit: cover;
        }

        .filter-section {
            background-color: #033649;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .no-results {
            text-align: center;
            padding: 20px;
            display: none;
            color: #ff6b6b;
        }
        
        .game-score {
            font-weight: bold;
        }
    </style>
</head>
<body>
    <header>
        <h1>Tutubas Games</h1>
    </header>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="paginicial.html">Início</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="pagjogos.html">Jogos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="pagsobre.html">Sobre</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="pagrank.html">Rank</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container my-5">
        <div class="ranking-header">
            <h2><i class="fas fa-trophy"></i> Ranking de Jogadores</h2>
            <p class="lead">Classificação baseada na pontuação total acumulada nos jogos</p>
        </div>

        <div class="filter-section">
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="gameFilter" class="form-label">Filtrar por Jogo:</label>
                    <select class="form-select" id="gameFilter">
                        <option value="all">Pontuação Total (ambos jogos)</option>
                        <option value="1">Tutubas Bolhas</option>
                        <option value="2">Tutubas Fila</option>
                    </select>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="searchPlayer" class="form-label">Buscar Jogador:</label>
                    <div class="input-group">
                        <input type="text" class="form-control" id="searchPlayer" placeholder="Nome do jogador">
                        <button class="btn btn-primary" type="button" id="searchButton">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="ranking-table">
            <table class="table table-hover" id="rankingTable">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Jogador</th>
                        <th scope="col">Pontuação Total</th>
                        <th scope="col">Tutubas Bolhas</th>
                        <th scope="col">Tutubas Fila</th>
                    </tr>
                </thead>
                <tbody id="rankingTableBody">
                    <!-- Dados que eu preenchio via javascript mas vamos puxar do banco -->
                </tbody>
            </table>
            <div id="noResults" class="no-results">
                <i class="fas fa-exclamation-circle fa-2x"></i>
                <p>Nenhum jogador encontrado com esse nome.</p>
            </div>
        </div>

        <nav aria-label="Page navigation" class="mt-4">
            <ul class="pagination justify-content-center" id="pagination">
            </ul>
        </nav>
    </div>
    <footer>
        <p>&copy; 2025 Tutubas Games. Todos os direitos reservados.</p>
    </footer>
    
    <!-- jQuery para facilitar as requisições AJAX -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        $(document).ready(function() {

            const players = [
                {
                    id: 1,
                    name: "PlayerOne",
                    avatar: "https://randomuser.me/api/portraits/men/32.jpg",
                    game1_score: 9820,
                    game2_score: 6000,
                    last_activity: "2023-06-15"
                },
                {
                    id: 2,
                    name: "TutubaGameMaster",
                    avatar: "https://randomuser.me/api/portraits/women/44.jpg",
                    game1_score: 8750,
                    game2_score: 6000,
                    last_activity: "2023-06-14"
                },
                {
                    id: 3,
                    name: "TubaraoProGamerBR",
                    avatar: "https://randomuser.me/api/portraits/men/75.jpg",
                    game1_score: 8420,
                    game2_score: 5000,
                    last_activity: "2023-06-13"
                },
                {
                    id: 4,
                    name: "SharkOfGames",
                    avatar: "https://randomuser.me/api/portraits/women/68.jpg",
                    game1_score: 7980,
                    game2_score: 5000,
                    last_activity: "2023-06-12"
                },
                {
                    id: 5,
                    name: "NoobMaster69",
                    avatar: "https://randomuser.me/api/portraits/men/12.jpg",
                    game1_score: 7340,
                    game2_score: 4000,
                    last_activity: "2023-06-11"
                },
                {
                    id: 6,
                    name: "sharkGamer",
                    avatar: "https://randomuser.me/api/portraits/women/33.jpg",
                    game1_score: 6870,
                    game2_score: 4000,
                    last_activity: "2023-06-10"
                },
                {
                    id: 7,
                    name: "TutubasKing",
                    avatar: "https://randomuser.me/api/portraits/men/90.jpg",
                    game1_score: 5650,
                    game2_score: 4000,
                    last_activity: "2023-06-09"
                },
                {
                    id: 8,
                    name: "tubarinaGamerGirl",
                    avatar: "https://randomuser.me/api/portraits/women/22.jpg",
                    game1_score: 4920,
                    game2_score: 4000,
                    last_activity: "2023-06-08"
                },
                {
                    id: 9,
                    name: "tutuba_Player",
                    avatar: "https://randomuser.me/api/portraits/men/45.jpg",
                    game1_score: 3830,
                    game2_score: 4000,
                    last_activity: "2023-06-07"
                },
                {
                    id: 10,
                    name: "Tubaraoteamo",
                    avatar: "https://randomuser.me/api/portraits/women/55.jpg",
                    game1_score: 2450,
                    game2_score: 4000,
                    last_activity: "2023-06-06"
                }
            ];

            let currentPage = 1;
            const itemsPerPage = 10;
            let filteredPlayers = [];
            
            // Inicializa a página
            loadRankingData();
            
            // EventOS
            $('#gameFilter').change(function() {
                currentPage = 1;
                filterPlayers();
                renderRankingTable();
                renderPagination();
            });
            
            $('#searchButton').click(function() {
                currentPage = 1;
                filterPlayers();
                renderRankingTable();
                renderPagination();
            });
            
            $('#searchPlayer').keypress(function(e) {
                if (e.which === 13) { // Enter key
                    currentPage = 1;
                    filterPlayers();
                    renderRankingTable();
                    renderPagination();
                }
            });
            

            function loadRankingData() {
                // Calcula a pontuação total para cada jogador
                players.forEach(player => {
                    player.total_score = player.game1_score + player.game2_score;
                });
                
                filterPlayers();
                renderRankingTable();
                renderPagination();
            }
            
            // Função para filtrar jogadores
            function filterPlayers() {
                const gameFilter = $('#gameFilter').val();
                const searchTerm = $('#searchPlayer').val().toLowerCase();
                
                filteredPlayers = players.filter(player => {
                    // Filtro por nome
                    if (searchTerm && !player.name.toLowerCase().includes(searchTerm)) {
                        return false;
                    }
                    
                    return true;
                });
                
                // Ordenar
                filteredPlayers.sort((a, b) => {
                    if (gameFilter === '1') {
                        return b.game1_score - a.game1_score;
                    } else if (gameFilter === '2') {
                        return b.game2_score - a.game2_score;
                    } else {
                        return b.total_score - a.total_score;
                    }
                });
            }
            
            // Função para renderizar a tabela
            function renderRankingTable() {
                const $tableBody = $('#rankingTableBody');
                $tableBody.empty();
                
                const startIndex = (currentPage - 1) * itemsPerPage;
                const endIndex = Math.min(startIndex + itemsPerPage, filteredPlayers.length);
                const gameFilter = $('#gameFilter').val();
                
                if (filteredPlayers.length === 0) {
                    $('#noResults').show();
                    return;
                } else {
                    $('#noResults').hide();
                }
                
                for (let i = startIndex; i < endIndex; i++) {
                    const player = filteredPlayers[i];
                    const rank = i + 1;
                    
                    let rowClass = '';
                    if (rank === 1) rowClass = 'rank-1';
                    else if (rank === 2) rowClass = 'rank-2';
                    else if (rank === 3) rowClass = 'rank-3';
                    
                    // Medalhas corretas para os 3 primeiros
                    const medalIcon = rank <= 3 ? 
                        `<img src="https://cdn-icons-png.flaticon.com/512/2583/2583${rank === 1 ? '344' : rank === 2 ? '319' : '334'}.png" 
     alt="${rank === 1 ? 'Ouro' : rank === 2 ? 'Bronze' : 'Prata'}" class="medal">` : '';
                    
                    const row = `
                        <tr class="${rowClass}">
                            <th scope="row">${medalIcon}${rank}</th>
                            <td>
                                <img src="${player.avatar}" alt="Avatar" class="avatar">
                                ${player.name}
                            </td>
                            <td>${player.total_score.toLocaleString()}</td>
                            <td class="game-score">${player.game1_score.toLocaleString()}</td>
                            <td class="game-score">${player.game2_score.toLocaleString()}</td>
                        </tr>
                    `;
                    
                    $tableBody.append(row);
                }
            }
            
            function renderPagination() {
                const $pagination = $('#pagination');
                $pagination.empty();
                
                const totalPages = Math.ceil(filteredPlayers.length / itemsPerPage);
                
                if (totalPages <= 1) return;

                const prevDisabled = currentPage === 1 ? 'disabled' : '';
                $pagination.append(`
                    <li class="page-item ${prevDisabled}">
                        <a class="page-link" href="#" aria-label="Anterior" id="prevPage">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                `);
                
                for (let i = 1; i <= totalPages; i++) {
                    const active = i === currentPage ? 'active' : '';
                    $pagination.append(`
                        <li class="page-item ${active}">
                            <a class="page-link" href="#" data-page="${i}">${i}</a>
                        </li>
                    `);
                }

                const nextDisabled = currentPage === totalPages ? 'disabled' : '';
                $pagination.append(`
                    <li class="page-item ${nextDisabled}">
                        <a class="page-link" href="#" aria-label="Próximo" id="nextPage">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                `);
                

                $('[data-page]').click(function(e) {
                    e.preventDefault();
                    currentPage = parseInt($(this).data('page'));
                    renderRankingTable();
                    window.scrollTo(0, 0);
                });
                
                $('#prevPage').click(function(e) {
                    e.preventDefault();
                    if (currentPage > 1) {
                        currentPage--;
                        renderRankingTable();
                        window.scrollTo(0, 0);
                    }
                });
                
                $('#nextPage').click(function(e) {
                    e.preventDefault();
                    if (currentPage < totalPages) {
                        currentPage++;
                        renderRankingTable();
                        window.scrollTo(0, 0);
                    }
                });
            }
        });
    </script>
</body>
</html>
